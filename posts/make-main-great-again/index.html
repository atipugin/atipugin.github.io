<!doctype html><html lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="Make main() great again"><meta property="og:description" content="–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ main. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –ª—é–±–æ–≥–æ –Ω–∞—à–µ–≥–æ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–æ–±–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ —Ç–∞–º.
–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º –∫–æ–¥:
func main() { fmt.Println(&#34;Hello, world&#34;) } –î–∞–∂–µ –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –Ω–µ –º–æ–∂–µ–º –≤–∑—è—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. –í—Å—ë –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ main –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∏ –ø–æ–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º –Ω–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è - —Å–∏–≥–Ω–∞—Ç—É—Ä—É –ø–æ–º–µ–Ω—è—Ç—å –º—ã –Ω–µ –º–æ–∂–µ–º.
–ù–æ —Ä–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å. –ú—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é-–¥–µ–ª–µ–≥–∞—Ç, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –≤—Å—é –Ω–∞—à—É –ª–æ–≥–∏–∫—É, –∞ –≤ main –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –µ—ë:"><meta property="og:type" content="article"><meta property="og:url" content="https://atipugin.dev/posts/make-main-great-again/"><meta property="article:published_time" content="2020-03-01T00:00:00+00:00"><meta property="article:modified_time" content="2020-03-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Make main() great again"><meta name=twitter:description content="–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ main. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –ª—é–±–æ–≥–æ –Ω–∞—à–µ–≥–æ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–æ–±–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ —Ç–∞–º.
–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º –∫–æ–¥:
func main() { fmt.Println(&#34;Hello, world&#34;) } –î–∞–∂–µ –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –Ω–µ –º–æ–∂–µ–º –≤–∑—è—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. –í—Å—ë –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ main –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∏ –ø–æ–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º –Ω–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è - —Å–∏–≥–Ω–∞—Ç—É—Ä—É –ø–æ–º–µ–Ω—è—Ç—å –º—ã –Ω–µ –º–æ–∂–µ–º.
–ù–æ —Ä–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å. –ú—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é-–¥–µ–ª–µ–≥–∞—Ç, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –≤—Å—é –Ω–∞—à—É –ª–æ–≥–∏–∫—É, –∞ –≤ main –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –µ—ë:"><title>Make main() great again | @atipugin</title><link rel=stylesheet href=/main-2f09d543f85b32d83dc8.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,700&display=swap&subset=cyrillic"></head><body><header class="navbar navbar-expand-lg navbar-light"><div class=container><a class=navbar-brand href=https://atipugin.dev/><img class=rounded-circle src=/images/me.png alt=@atipugin width=32 height=32></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#menu>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=menu><ul class=navbar-nav><li class="nav-item active"><a class="nav-link font-weight-bold" href=/posts/>–ë–ª–æ–≥</a></li></ul></div></div></header><main class=py-3><div class=container><article><header class=mb-3><h1>üëë Make main() great again</h1><time class=text-muted>01/03/2020</time></header><p>–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ <code>main</code>. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –ª—é–±–æ–≥–æ –Ω–∞—à–µ–≥–æ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–æ–±–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ —Ç–∞–º.</p><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º –∫–æ–¥:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Hello, world&#34;</span>)
}
</code></pre></div><p>–î–∞–∂–µ –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –Ω–µ –º–æ–∂–µ–º –≤–∑—è—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. –í—Å—ë –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ <code>main</code> –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∏ –ø–æ–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º –Ω–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è - —Å–∏–≥–Ω–∞—Ç—É—Ä—É –ø–æ–º–µ–Ω—è—Ç—å –º—ã –Ω–µ –º–æ–∂–µ–º.</p><p>–ù–æ —Ä–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å. –ú—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é-–¥–µ–ª–µ–≥–∞—Ç, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –≤—Å—é –Ω–∞—à—É –ª–æ–≥–∏–∫—É, –∞ –≤ <code>main</code> –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –µ—ë:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>realMain</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdin</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdout</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Args</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>realMain</span>(<span style=color:#a6e22e>in</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Reader</span>, <span style=color:#a6e22e>out</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>, <span style=color:#a6e22e>args</span> []<span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintln</span>(<span style=color:#a6e22e>out</span>, <span style=color:#e6db74>&#34;Hello, world!&#34;</span>)

	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}
</code></pre></div><p>–ù–∞—à–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è <code>realMain</code> –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ (<code>os.Stdin</code>, <code>os.Stdout</code>), –∞ —Ç–∞–∫–∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (<code>os.Args</code>). –í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã <code>io.Reader</code> –∏ <code>io.Writer</code>. –ù–∞ –≤—ã—Ö–æ–¥–µ <code>realMain</code> –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.</p><p>–ó–¥–µ—Å—å –≤–∞–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –º—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ –Ω–∞–ø—Ä—è–º—É—é. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –º—ã –∑–∞–º–µ–Ω–∏–ª–∏ <code>fmt.Println(...)</code>, –Ω–∞ <code>fmt.Fprintln(out, ...)</code>.</p><p>–¢–∞–∫—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –º—ã —É–∂–µ –º–æ–∂–µ–º –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestRealMain</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#75715e>// –í–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bytes.Buffer
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>in</span>, <span style=color:#a6e22e>out</span> <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>Buffer</span>
	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>realMain</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>in</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>out</span>, []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;test&#34;</span>})
	<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
	<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>String</span>(), <span style=color:#e6db74>&#34;Hello, world!&#34;</span>)
}
</code></pre></div><h2 id=—Ä–∞–±–æ—Ç–∞-—Å-—Ñ–ª–∞–≥–∞–º–∏>–†–∞–±–æ—Ç–∞ —Å —Ñ–ª–∞–≥–∞–º–∏</h2><p>–ù–µ–º–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω–∏–º –Ω–∞—à –ø—Ä–∏–º–µ—Ä. –¢–µ–ø–µ—Ä—å –º—ã —Ö–æ—Ç–∏–º –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –Ω–µ –ø—Ä–æ—Å—Ç–æ &ldquo;Hello, world!", –Ω–æ –∏ –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ <code>-name</code>. –ï—Å–ª–∏ –∂–µ –∏–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—à–∏–±–∫—É.</p><p>–§–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ <code>args</code> —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>var</span> (
	<span style=color:#a6e22e>errNoNameGiven</span> = <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#e6db74>&#34;no name given&#34;</span>)
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>realMain</span>(<span style=color:#a6e22e>in</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Reader</span>, <span style=color:#a6e22e>out</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>, <span style=color:#a6e22e>args</span> []<span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#75715e>// args[0] —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>flags</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>NewFlagSet</span>(<span style=color:#a6e22e>args</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>ContinueOnError</span>)
	<span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flags</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;your name&#34;</span>)

	<span style=color:#75715e>// –û—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ª–µ–∂–∞—Ç –≤ args, –Ω–∞—á–∏–Ω–∞—è —Å 1-–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flags</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>args</span>[<span style=color:#ae81ff>1</span>:]); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
	}

	<span style=color:#66d9ef>if</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>errNoNameGiven</span>
	}

	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>out</span>, <span style=color:#e6db74>&#34;Hello, %s!\n&#34;</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>name</span>)

	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}
</code></pre></div><p>–ú—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Ñ–ª–∞–≥–∞—Ö –Ω–∞ –≤—Ö–æ–¥–µ:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestRealMain</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
	<span style=color:#a6e22e>testCases</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>struct</span> {
		<span style=color:#a6e22e>name</span>   <span style=color:#66d9ef>string</span>
		<span style=color:#a6e22e>flags</span>  []<span style=color:#66d9ef>string</span>
		<span style=color:#a6e22e>err</span>    <span style=color:#66d9ef>error</span>
		<span style=color:#a6e22e>output</span> <span style=color:#66d9ef>string</span>
	}{
		{
			<span style=color:#a6e22e>name</span>:   <span style=color:#e6db74>&#34;valid&#34;</span>,
			<span style=color:#a6e22e>flags</span>:  []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;-name&#34;</span>, <span style=color:#e6db74>&#34;John Doe&#34;</span>},
			<span style=color:#a6e22e>err</span>:    <span style=color:#66d9ef>nil</span>,
			<span style=color:#a6e22e>output</span>: <span style=color:#e6db74>&#34;Hello, John Doe!&#34;</span>,
		},
		{
			<span style=color:#a6e22e>name</span>:   <span style=color:#e6db74>&#34;no name given&#34;</span>,
			<span style=color:#a6e22e>flags</span>:  []<span style=color:#66d9ef>string</span>{},
			<span style=color:#a6e22e>err</span>:    <span style=color:#a6e22e>errNoNameGiven</span>,
			<span style=color:#a6e22e>output</span>: <span style=color:#e6db74>&#34;&#34;</span>,
		},
	}

	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>tc</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>testCases</span> {
		<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#a6e22e>tc</span>.<span style=color:#a6e22e>name</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
			<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>in</span>, <span style=color:#a6e22e>out</span> <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>Buffer</span>
			<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>realMain</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>in</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>out</span>, append([]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;test&#34;</span>}, <span style=color:#a6e22e>tc</span>.<span style=color:#a6e22e>flags</span><span style=color:#f92672>...</span>))
			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>Equal</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>tc</span>.<span style=color:#a6e22e>err</span>)
			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>String</span>(), <span style=color:#a6e22e>tc</span>.<span style=color:#a6e22e>output</span>)
		})
	}
}
</code></pre></div><h2 id=–≤—ã–≤–æ–¥>–í—ã–≤–æ–¥</h2><p>–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–µ–ª–∞–µ—Ç –Ω–∞—à –∫–æ–¥ –±–æ–ª–µ–µ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–º –∏ —É–¥–æ–±–Ω—ã–º –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏. –¢–µ–ø–µ—Ä—å –º—ã –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –º–æ–∂–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ –≤–µ—â–∏, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞ —Å –≤–≤–æ–¥–æ–º/–≤—ã–≤–æ–¥–æ–º, —Ñ–ª–∞–≥–∏ –∏ —Ç.–ø.</p></article></div></main><footer class=py-3><div class=container><ul class=list-inline><li class=list-inline-item><a class=text-secondary href=/index.xml>RSS</a></li><li class=list-inline-item><a class=text-secondary href=https://github.com/atipugin>GitHub</a></li><li class=list-inline-item><a class=text-secondary href=https://twitter.com/atipugin>Twitter</a></li></ul></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-61037346-7','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=/main-2f09d543f85b32d83dc8.js></script></body></html>